<section>
    <h1>Liste des commandes</h1>
    <div class="card">
        <p-table [value]="demandList" [tableStyle]="{'min-width': '50rem'}">
            <ng-template pTemplate="header" let-columns>
                <tr>
                    <th>ref</th>
                    <th>Objet</th>
                    <th>description</th>
                    <th>Date de retrait</th>
                    <th>Statut</th>
                    <th>Action</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-demande let-columns="columns">
                <tr>
                    <td>{{demande.id}}</td>
                    <td>{{demande.object}}</td>
                    <td>{{demande.content}}</td>
                    <td>{{demande.dateRetrait}}</td>
                    <td>
                        <div class="{{demande.statut}} d-flex justify-content-center align-items-center pt-2">
                            <p>{{demande.statut}}</p>
                        </div>
                    </td>
                    <td>
                        <button pButton pRipple type="button" icon="pi pi-check"
                            class="p-button-rounded p-button-success p-button-outlined m-2"
                            (click)="selectCommand(demande)" data-bs-toggle="modal" data-bs-target="#myModal"></button>
                        <button pButton pRipple type="button" icon="pi pi-times"
                            class="p-button-rounded p-button-danger p-button-outlined  m-2"></button>
                        <button pButton pRipple type="button" icon="pi pi-comment"
                            class="p-button-rounded p-button-success p-button-outlined m-2"
                            (click)="selectMessage()" data-bs-toggle="modal" data-bs-target="#myModal"></button>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>


    <p-dialog [(visible)]="displayModal" header="Faites votre proposition" [modal]="true" [style]="{width: '30vw'}"
        [maximizable]="false" [draggable]="false" [resizable]="false">
        <form [formGroup]="form">
            <div class="form-control m-2">
                <label for="prix">Prix</label>
                <input type="text" formControlName="prixOffre" class="form-control" id="prix">
            </div>
            <div class="form-control m-2">
                <label for="dateOffre" class="form-label">Date et heure du retrait</label>
                <input type="datetime-local" formControlName="dateOffre" class="form-control" id="dateOffre"
                    required>
            </div>
        </form>
        <ng-template pTemplate="footer">
            <div class="modal-footer">
                <button type="submit" (click)="registerOffre()" class="btn btn-primary btnSubmit">Envoyer</button>
            </div>
        </ng-template>
    </p-dialog>






    <!-- Modal view -->
    <p-dialog [(visible)]="displayModal" header="Message" [modal]="true" [style]="{width: '30vw'}" [maximizable]="false"
        [draggable]="false" [resizable]="false">
        <!-- HTML -->
        <div class="card-body">
            <section class="session-body">
                <div class="container py-5">
                    <div class="row d-flex justify-content-center">
                        <div>
                            <div class="contenuMessage" data-mdb-perfect-scrollbar="true">
                                <div class="d-flex justify-content-between">
                                    <p class="small mb-1">Timona Siera</p>
                                    <p class="small mb-1 text-muted">23 Jan 2:00 pm</p>
                                </div>
                                <div class="d-flex flex-row justify-content-start">
                                    <img class="imageAvatar" src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava5-bg.webp"
                                        alt="avatar 1">
                                    <div>
                                        <p class="pmessage small p-2 ms-3 mb-3 rounded-3">For
                                            what reason
                                            would it
                                            be advisable for me to think about business content?</p>
                                    </div>
                                </div>

                                <div class="d-flex justify-content-between">
                                    <p class="small mb-1 text-muted">23 Jan 2:05 pm</p>
                                    <p class="small mb-1">Johny Bullock</p>
                                </div>
                                <div class="d-flex flex-row justify-content-end mb-4 pt-1">
                                    <div>
                                        <p class="pmessage small p-2 me-3 mb-3 text-white rounded-3 bg-warning">Thank you for
                                            your believe in
                                            our
                                            supports</p>
                                    </div>
                                    <img class="imageAvatar" src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava6-bg.webp"
                                        alt="avatar 1">
                                </div>

                                <div class="d-flex justify-content-between">
                                    <p class="small mb-1">Timona Siera</p>
                                    <p class="small mb-1 text-muted">23 Jan 5:37 pm</p>
                                </div>
                                <div class="d-flex flex-row justify-content-start">
                                    <img class="imageAvatar" src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava5-bg.webp"
                                        alt="avatar 1">
                                    <div>
                                        <p class="pmessage small p-2 ms-3 mb-3 rounded-3">
                                            Lorem ipsum dolor
                                            sit amet
                                            consectetur adipisicing elit similique quae consequatur</p>
                                    </div>
                                </div>

                                <div class="d-flex justify-content-between">
                                    <p class="small mb-1 text-muted">23 Jan 6:10 pm</p>
                                    <p class="small mb-1">Johny Bullock</p>
                                </div>
                                <div class="d-flex flex-row justify-content-end mb-4 pt-1">
                                    <div>
                                        <p class="pmessage small p-2 me-3 mb-3 text-white rounded-3 bg-warning">Dolorum quasi
                                            voluptates quas
                                            amet in
                                            repellendus perspiciatis fugiat</p>
                                    </div>
                                    <img class="imageAvatar" src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava6-bg.webp"
                                        alt="avatar 1">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
        <ng-template pTemplate="footer">
            <div class="modal-footer">
                <div class="row">
                    <div class="col-10">
                        <form #messageForm="ngForm">
                            <div class="form-group">
                                <input type="text" id="message" name="message" class="form-control"
                                    placeholder="Ecrire votre essage" required>
                            </div>
                        </form>
                    </div>
                    <div class="col-2">
                        <button type="submit" class="btn btn-primary"><i class="bi bi-send"></i></button>
                    </div>
                </div>
            </div>
        </ng-template>
    </p-dialog>
</section>



<p-toast position="top-center" key="reponseSent"></p-toast>
<p-toast position="top-center" key="firstReponse"></p-toast>